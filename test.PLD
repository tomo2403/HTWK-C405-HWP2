/* Eingänge */
Pin 1  = Clock;    /* Clock-Signal */
Pin 2  = Mode;     /* Mode-Schalter */

/* Ausgänge */
Pin 19 = Q0;       /* Ausgang für Zähler-Bit 0 */
Pin 18 = Q1;       /* Ausgang für Zähler-Bit 1 */
Pin 17 = Q2;       /* Ausgang für Zähler-Bit 2 */
Pin 16 = Q3;       /* Ausgang für Zähler-Bit 3 */

/* Interne Variablen */
Field Count = [Q3..Q0]; /* Zähler von 0 bis 15 */

$Define MAX_VALUE 5 /* Maximale Zählwert */

/* Logik */
Equation
/* Zählerlogik */
if (!Clock' & Clock) then /* Steigende Flanke der Clock */
{
    if (Mode == 0) then
    {
        Count = (Count < MAX_VALUE) ? Count + 1 : 0; /* Normales Zählen */
    }
    else
    {
        /* Modus: Wiederhole 5 öfter */
        if (Count == MAX_VALUE) then
            Count = MAX_VALUE;
        else
            Count = Count + 1;
    }
}